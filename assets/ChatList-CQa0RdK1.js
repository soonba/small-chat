import{r as a,j as e}from"./@react-vendor-BjtCfNPP.js";import{F as d,g as c}from"./date-CxfBTTOA.js";import{b as p,d as g,f as b,L as x}from"./index-CtnMiJ-I.js";import{b as h}from"./@network-vendor-DshJZGAT.js";const u=async()=>h("/v2/chats").then(r=>r.data),k=()=>{const{onChatJoin:r}=p(),i=a.useRef(!1),{data:t,...s}=g({queryFn:u,queryKey:b.lists(),select:n=>n.chatMessages});return a.useEffect(()=>{!i.current&&t&&t.length>0&&(i.current=!0,r(t.map(n=>`list_${n.chatId}`)))},[t,r]),{data:t,...s}};function m({text:r}){return e.jsx("li",{className:"flex min-h-inherit w-full items-center justify-center",children:e.jsx("p",{className:"text-center text-20-B-28 spring:text-pink-950 winter:text-white sm:text-24-BL-32 dark:spring:text-pink-50 dark:winter:text-blue-100",children:r})})}function o(){return e.jsx("div",{className:"min-h-inherit space-y-2.5",children:Array.from({length:5},(r,i)=>e.jsx("div",{className:"flex w-full animate-pulse items-center rounded-lg px-2.5 py-2.5 spring:bg-white/20 winter:bg-blue-50/10 sm:px-4 dark:spring:bg-pink-50/10 dark:winter:bg-blue-50/10",children:e.jsxs("div",{className:"flex w-full items-center gap-2.5 sm:gap-4",children:[e.jsx("div",{className:"size-12 shrink-0 rounded-lg spring:bg-white/30 winter:bg-blue-50/20 dark:spring:bg-pink-50/20 dark:winter:bg-blue-50/20"}),e.jsxs("div",{className:"w-full space-y-1 sm:space-y-2.5",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-x-1 sm:gap-x-2.5",children:[e.jsx("div",{className:"h-4 w-1/4 rounded spring:bg-white/30 winter:bg-blue-50/20 sm:h-5 dark:spring:bg-pink-50/20 dark:winter:bg-blue-50/20"}),e.jsx("div",{className:"h-2 w-12 rounded spring:bg-white/30 winter:bg-blue-50/20 sm:h-3 dark:spring:bg-pink-50/20 dark:winter:bg-blue-50/20"})]}),e.jsx("div",{className:"h-3 w-2/3 rounded spring:bg-white/30 winter:bg-blue-50/20 sm:h-4 dark:spring:bg-pink-50/20 dark:winter:bg-blue-50/20"})]})]})},i))})}function w({data:r,emptyText:i,isLoading:t,renderItem:s}){return t?e.jsx(o,{}):!r||r.length===0?e.jsx(m,{text:i}):e.jsx("ul",{className:"mb-8 min-h-inherit space-y-2.5",children:r.map((n,l)=>s(n,l))})}function f({chatId:r,chatName:i,lastMessage:t,lastSentAt:s}){return e.jsx("li",{className:"group rounded-lg border px-2.5 py-2.5 spring:border-pink-900 spring:bg-white hover:spring:border-pink-950 hover:spring:bg-pink-50 active:spring:border-pink-950 active:spring:bg-pink-100 winter:border-blue-900 winter:bg-blue-50/10 hover:winter:border-blue-950 hover:winter:bg-blue-50/50 active:winter:border-blue-950 active:winter:bg-blue-100/50 sm:px-4 dark:spring:border-pink-100 dark:spring:bg-black/10 dark:hover:spring:border-pink-200 dark:hover:spring:bg-black/20 dark:active:spring:border-pink-300 dark:active:spring:bg-black/50 dark:winter:border-blue-100/20 dark:winter:bg-black/10 dark:hover:winter:border-blue-100/40 dark:hover:winter:bg-black/10 dark:active:winter:border-blue-100/60 dark:active:winter:bg-black/10",children:e.jsx(x,{to:`/chat/${r}`,children:e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-4",children:[e.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-lg spring:bg-pink-900 winter:bg-blue-900 sm:size-12 dark:spring:bg-pink-100 dark:winter:bg-blue-100",children:e.jsx(d,{className:"size-5 spring:text-pink-50 winter:text-blue-100 sm:size-6 dark:spring:text-pink-950 dark:winter:text-blue-900"})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-x-1 sm:gap-x-2.5",children:[e.jsx("p",{className:"line-clamp-1 break-all text-14-SB-20 spring:text-pink-950 winter:text-white sm:text-16-SB-24 dark:spring:text-pink-50 dark:winter:text-blue-100",children:i}),e.jsx("time",{className:"shrink-0 text-10-L-12 spring:text-pink-950 winter:text-white winter:text-shadow sm:text-12-L-16 dark:spring:text-pink-50/50 dark:winter:text-blue-100/50 dark:winter:text-shadow-unset",children:c(s)})]}),e.jsx("p",{className:"line-clamp-2 break-all text-12-R-16 spring:text-pink-950 winter:text-white sm:text-14-R-20 dark:spring:text-pink-50 dark:winter:text-blue-100",children:t})]})]})})})}function L(){const{data:r,isFetching:i}=k();return e.jsx("div",{className:"size-full min-h-[calc(100vh-176px)] p-2.5 sm:p-5",children:e.jsx(w,{data:r||[],emptyText:"채팅에 참여해 보세요.",renderItem:t=>e.jsx(f,{...t},t.chatId),isLoading:i})})}export{L as default};
